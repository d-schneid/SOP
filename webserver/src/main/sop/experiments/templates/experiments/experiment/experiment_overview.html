{% extends 'model_overview.html' %}

{% block title %}Experiment Overview{% endblock %}

{% block heading %}
    <h2 class="mt-3 mb-3">Own Experiments</h2>
    <button class="btn btn-outline-dark mt-3 mb-3 ml-auto mr-3 dropdown-toggle" id="sortByButton" data-toggle="dropdown"
            aria-haspopup="true" aria-expanded="false">Sort by {{ view.kwargs.sort }}</button>
    <ul class="dropdown-menu mr-5" aria-labelledby="sortByButton">
        <li><a href="{% url 'experiment_overview_sorted' 'name' %}" class="dropdown-item btn-secondary">Name</a></li>
        <li><a href="{% url 'experiment_overview_sorted' 'creation_date' %}" class="dropdown-item btn-secondary">Creation
            date</a></li>
    </ul>
    <a href="{% url 'experiment_create' %}" class="mt-3 mb-3 btn btn-outline-dark">Create experiment</a>
{% endblock %}

{% block card-header %}
    <h5 class="mb-0 w-80">
        <a class="btn-link btn-block text-white{% if not forloop.first %} collapsed{% endif %}"
           aria-expanded="{% if forloop.first %}true{% else %}false{% endif %}"
           aria-controls="collapse_{{ model.pk }}">
            {{ model.display_name }}
        </a>
    </h5>
{% endblock %}

{% block card-body %}
    <div class="d-flex">
        <a>{{ model.creation_date }}</a>

        <a href="{% url 'execution_create' model.pk %}"
           class="btn btn-success ml-auto">Create Execution</a>
    </div>
    <div class="d-flex">
        <a>Dataset: {{ model.dataset.display_name }}</a>
    </div>
    <div class="d-flex">
        <a>
            Algorithms:
            {{ model.algorithms.all|join:", " }}
        </a>
    </div>
{% endblock %}

{% block card-footer %}
    {% for execution in model.execution_set.all %}
        <ul class="list-group list-group-flush">
            <li class="list-group-item">
                <div class="d-flex">
                    <a class="flex-fill">Execution {{ forloop.counter }}</a>
                    <a class="flex-fill">{{ execution.status }}</a>
                    <a class="flex-fill">{{ execution.progess }}</a>
                    <a class="flex-fill">{{ execution.creation_date }}</a>
                </div>
            </li>
        </ul>
    {% endfor %}
    <ul class="list-group list-group-flush">
        <li class="list-group-item">
            <div class="d-flex flex-row-reverse">
                <a href="{% url 'experiment_delete' model.pk %}"
                   class="btn btn-danger mr-3">Delete Experiment</a>
                <a href="{% url 'experiment_edit' model.pk %}"
                   class="btn btn-warning mr-3">Edit Experiment</a>
            </div>
        </li>
    </ul>
{% endblock %}